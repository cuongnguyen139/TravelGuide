{"ast":null,"code":"import _objectWithoutProperties from \"/home/cuong/react_projects/my-app-auth/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/home/cuong/react_projects/my-app-auth/src/HomePage.js\";\nimport React from \"react\";\nimport PhoneList from \"./PhoneList\";\nimport AddNumberModal from \"./AddNumberModal\";\nimport { Menu } from \"semantic-ui-react\";\nimport TableForPrint from \"./TableForPrint\";\nimport XLSX from \"xlsx\";\nimport Logo from \"./assets/logo_2_vari.png\";\n\nclass HomePage extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      activeItem: \"home\",\n      data: [],\n      error: null,\n      fileName: \"contact.xlsx\"\n    };\n\n    this.customers = () => {\n      let customers = this.state.data.map((_ref) => {\n        let alert_info_enabled = _ref.alert_info_enabled,\n            aservicemask_id = _ref.aservicemask_id,\n            forward_autoself = _ref.forward_autoself,\n            number = _ref.number,\n            language_id = _ref.language_id,\n            notify = _ref.notify,\n            operator_id = _ref.operator_id,\n            number_id = _ref.number_id,\n            id = _ref.id,\n            type = _ref.type,\n            use_default = _ref.use_default,\n            voiplocation_code = _ref.voiplocation_code,\n            company_id = _ref.company_id,\n            whitelist = _ref.whitelist,\n            whitelist_mode = _ref.whitelist_mode,\n            whitelist_pin_in = _ref.whitelist_pin_in,\n            whitelist_pin_in_enabled = _ref.whitelist_pin_in_enabled,\n            whitelist_pin_out = _ref.whitelist_pin_out,\n            whitelist_pin_out_enabled = _ref.whitelist_pin_out_enabled,\n            item = _objectWithoutProperties(_ref, [\"alert_info_enabled\", \"aservicemask_id\", \"forward_autoself\", \"number\", \"language_id\", \"notify\", \"operator_id\", \"number_id\", \"id\", \"type\", \"use_default\", \"voiplocation_code\", \"company_id\", \"whitelist\", \"whitelist_mode\", \"whitelist_pin_in\", \"whitelist_pin_in_enabled\", \"whitelist_pin_out\", \"whitelist_pin_out_enabled\"]);\n\n        return item;\n      });\n      customers = customers.map(({\n        info,\n        short_number\n      }) => ({\n        Name: info,\n        Number: short_number\n      }));\n      customers = customers.filter(person => person.Name !== \"Opas test IVR number\");\n      customers = customers.filter(person => person.Name !== \"Call Conference\");\n      customers.push({\n        Name: \"Call Conference\",\n        Number: \"99\"\n      });\n      customers.push({\n        Name: \"Palvelu Numero\",\n        Number: \"034439430\"\n      });\n      return customers;\n    };\n\n    this.printData = () => {\n      const divToPrint = document.getElementById(\"printTable\");\n      const newWin = window.open(\"\");\n      newWin.document.write(divToPrint.outerHTML);\n      newWin.print();\n      newWin.close();\n    };\n\n    this.exportFile = () => {\n      /* convert state.data to worksheet */\n      const ws = XLSX.utils.json_to_sheet(this.customers());\n      /* build a workbook */\n\n      const wb = XLSX.utils.book_new();\n      XLSX.utils.book_append_sheet(wb, ws, \"SheetJS\");\n      /* generate XLSX file and send to client */\n\n      XLSX.writeFile(wb, \"contact.xlsx\");\n    };\n\n    this.deleteShortNumberHandler = id => {\n      fetch(\"http://demo2.nsftele.com/travel-guide-php/removeShortNumber.php\", {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\"\n        },\n        body: JSON.stringify({\n          short_number: id\n        })\n      }).then(() => {\n        this.loadData();\n      }).catch(error => this.setState({\n        error\n      }));\n    };\n\n    this.deletePublicNumberHandler = id => {\n      fetch(\"http://demo2.nsftele.com/travel-guide-php/removePublicNumber.php\", {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\"\n        },\n        body: JSON.stringify({\n          number_id: id\n        })\n      }).then(() => {\n        this.loadData();\n      }).catch(error => this.setState({\n        error\n      }));\n    };\n\n    this.handleItemClick = (e, {\n      name\n    }) => this.setState({\n      activeItem: name\n    });\n  }\n\n  loadData() {\n    fetch(\"http://demo2.nsftele.com/travel-guide-php/data.php\").then(response => {\n      return response.json();\n    }).then(result => {\n      this.setState({\n        data: result\n      });\n    }).catch(error => this.setState({\n      error\n    }));\n  }\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  render() {\n    const activeItem = this.state.activeItem;\n    return React.createElement(\"div\", {\n      style: {\n        paddingBottom: \"100px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(Menu, {\n      stackable: true,\n      size: \"small\",\n      inverted: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(Menu.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      alt: \"Logo\",\n      className: \"ui tiny image\",\n      src: Logo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    })), React.createElement(Menu.Item, {\n      href: \"/\",\n      name: \"home\",\n      active: activeItem === \"home\",\n      onClick: this.handleItemClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }), React.createElement(Menu.Item, {\n      name: \"service areas\",\n      active: activeItem === \"service areas\",\n      onClick: this.handleItemClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }), React.createElement(Menu.Item, {\n      name: \"customers\",\n      active: activeItem === \"customers\",\n      onClick: this.handleItemClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }), React.createElement(Menu.Item, {\n      name: \"company\",\n      active: activeItem === \"company\",\n      onClick: this.handleItemClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }), React.createElement(Menu.Item, {\n      name: \"contact us\",\n      active: activeItem === \"contact us\",\n      onClick: this.handleItemClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    })), this.state.error ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"Network error: \", this.state.error.message)) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        paddingLeft: \"20px\",\n        paddingTop: \"20px\"\n      },\n      className: \"col-md-4 center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"ui button\",\n      onClick: this.exportFile,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, \"Export To Excel\"), \"\\xA0 \\xA0\", React.createElement(\"button\", {\n      className: \"ui button\",\n      onClick: this.printData,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, \"Print Table\")), React.createElement(\"div\", {\n      style: {\n        fontSize: \"large\",\n        paddingLeft: \"20px\",\n        paddingTop: \"10px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }), \"Palvelu Numero: 034439430\"), React.createElement(\"div\", {\n      style: {\n        marginTop: \"30px\",\n        marginBottom: \"30px\"\n      },\n      className: \"ui center aligned grid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(AddNumberModal, {\n      data: this.state.data,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(PhoneList, {\n      onSubmitPN: this.deletePublicNumberHandler,\n      onSubmitSN: this.deleteShortNumberHandler,\n      data: this.state.data,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(TableForPrint, {\n      data: this.state.data,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default HomePage;","map":{"version":3,"sources":["/home/cuong/react_projects/my-app-auth/src/HomePage.js"],"names":["React","PhoneList","AddNumberModal","Menu","TableForPrint","XLSX","Logo","HomePage","Component","state","activeItem","data","error","fileName","customers","map","alert_info_enabled","aservicemask_id","forward_autoself","number","language_id","notify","operator_id","number_id","id","type","use_default","voiplocation_code","company_id","whitelist","whitelist_mode","whitelist_pin_in","whitelist_pin_in_enabled","whitelist_pin_out","whitelist_pin_out_enabled","item","info","short_number","Name","Number","filter","person","push","printData","divToPrint","document","getElementById","newWin","window","open","write","outerHTML","print","close","exportFile","ws","utils","json_to_sheet","wb","book_new","book_append_sheet","writeFile","deleteShortNumberHandler","fetch","method","headers","Accept","body","JSON","stringify","then","loadData","catch","setState","deletePublicNumberHandler","handleItemClick","e","name","response","json","result","componentDidMount","render","paddingBottom","message","paddingLeft","paddingTop","fontSize","marginTop","marginBottom"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport PhoneList from \"./PhoneList\";\nimport AddNumberModal from \"./AddNumberModal\";\nimport { Menu } from \"semantic-ui-react\";\nimport TableForPrint from \"./TableForPrint\";\nimport XLSX from \"xlsx\";\nimport Logo from \"./assets/logo_2_vari.png\";\n\nclass HomePage extends React.Component {\n  state = {\n    activeItem: \"home\",\n    data: [],\n    error: null,\n    fileName: \"contact.xlsx\"\n  };\n\n  customers = () => {\n    let customers = this.state.data.map(\n      ({\n        alert_info_enabled,\n        aservicemask_id,\n        forward_autoself,\n        number,\n        language_id,\n        notify,\n        operator_id,\n        number_id,\n        id,\n        type,\n        use_default,\n        voiplocation_code,\n        company_id,\n        whitelist,\n        whitelist_mode,\n        whitelist_pin_in,\n        whitelist_pin_in_enabled,\n        whitelist_pin_out,\n        whitelist_pin_out_enabled,\n        ...item\n      }) => item\n    );\n    customers = customers.map(({ info, short_number }) => ({\n      Name: info,\n      Number: short_number\n    }));\n    customers = customers.filter(\n      person => person.Name !== \"Opas test IVR number\"\n    );\n    customers = customers.filter(person => person.Name !== \"Call Conference\");\n    customers.push({ Name: \"Call Conference\", Number: \"99\" });\n    customers.push({ Name: \"Palvelu Numero\", Number: \"034439430\" });\n    return customers;\n  };\n\n  printData = () => {\n    const divToPrint = document.getElementById(\"printTable\");\n    const newWin = window.open(\"\");\n    newWin.document.write(divToPrint.outerHTML);\n    newWin.print();\n    newWin.close();\n  };\n\n  exportFile = () => {\n    /* convert state.data to worksheet */\n    const ws = XLSX.utils.json_to_sheet(this.customers());\n    /* build a workbook */\n    const wb = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(wb, ws, \"SheetJS\");\n    /* generate XLSX file and send to client */\n    XLSX.writeFile(wb, \"contact.xlsx\");\n  };\n\n  loadData() {\n    fetch(\"http://demo2.nsftele.com/travel-guide-php/data.php\")\n      .then(response => {\n        return response.json();\n      })\n      .then(result => {\n        this.setState({\n          data: result\n        });\n      })\n      .catch(error => this.setState({ error }));\n  }\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  deleteShortNumberHandler = id => {\n    fetch(\"http://demo2.nsftele.com/travel-guide-php/removeShortNumber.php\", {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\"\n      },\n      body: JSON.stringify({\n        short_number: id\n      })\n    })\n      .then(() => {\n        this.loadData();\n      })\n      .catch(error => this.setState({ error }));\n  };\n\n  deletePublicNumberHandler = id => {\n    fetch(\"http://demo2.nsftele.com/travel-guide-php/removePublicNumber.php\", {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\"\n      },\n      body: JSON.stringify({\n        number_id: id\n      })\n    })\n      .then(() => {\n        this.loadData();\n      })\n      .catch(error => this.setState({ error }));\n  };\n\n  handleItemClick = (e, { name }) => this.setState({ activeItem: name });\n\n  render() {\n    const { activeItem } = this.state;\n    return (\n      <div style={{ paddingBottom: \"100px\" }}>\n        <Menu stackable size=\"small\" inverted>\n          <Menu.Item>\n            <img alt=\"Logo\" className=\"ui tiny image\" src={Logo} />\n          </Menu.Item>\n          <Menu.Item\n            href=\"/\"\n            name=\"home\"\n            active={activeItem === \"home\"}\n            onClick={this.handleItemClick}\n          />\n          <Menu.Item\n            name=\"service areas\"\n            active={activeItem === \"service areas\"}\n            onClick={this.handleItemClick}\n          />\n          <Menu.Item\n            name=\"customers\"\n            active={activeItem === \"customers\"}\n            onClick={this.handleItemClick}\n          />\n          <Menu.Item\n            name=\"company\"\n            active={activeItem === \"company\"}\n            onClick={this.handleItemClick}\n          />\n          <Menu.Item\n            name=\"contact us\"\n            active={activeItem === \"contact us\"}\n            onClick={this.handleItemClick}\n          />\n        </Menu>\n        {this.state.error ? (\n          <div>\n            <p>Network error: {this.state.error.message}</p>\n          </div>\n        ) : (\n          <div>\n            <div\n              style={{ paddingLeft: \"20px\", paddingTop: \"20px\" }}\n              className=\"col-md-4 center\"\n            >\n              <button className=\"ui button\" onClick={this.exportFile}>\n                Export To Excel\n              </button>\n              &nbsp; &nbsp;\n              <button className=\"ui button\" onClick={this.printData}>\n                Print Table\n              </button>\n            </div>\n            <div\n              style={{\n                fontSize: \"large\",\n                paddingLeft: \"20px\",\n                paddingTop: \"10px\"\n              }}\n            >\n              <br />\n              Palvelu Numero: 034439430\n            </div>\n            <div\n              style={{ marginTop: \"30px\", marginBottom: \"30px\" }}\n              className=\"ui center aligned grid\"\n            >\n              <AddNumberModal data={this.state.data} />\n            </div>\n            <div>\n              <PhoneList\n                onSubmitPN={this.deletePublicNumberHandler}\n                onSubmitSN={this.deleteShortNumberHandler}\n                data={this.state.data}\n              />\n            </div>\n            <div>\n              <TableForPrint data={this.state.data} />\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\nexport default HomePage;\n"]},"metadata":{},"sourceType":"module"}