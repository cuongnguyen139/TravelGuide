{"ast":null,"code":"var _jsxFileName = \"/home/cuong/react_projects/my-app-server/src/AddOrUpdateShortNumber.js\";\nimport React from \"react\";\nimport TextInputGroup from \"./TextInputGroup\";\n\nclass AddOrUpdateShortNumber extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      value: \"select\",\n      id: \"\",\n      short_number: \"\",\n      error: null,\n      errors: {\n        value: \"\",\n        short_number: \"\"\n      }\n    };\n\n    this.onChangeValue = e => {\n      if (this.state.errors.value !== \"\") {\n        this.setState({\n          errors: {\n            value: \"\"\n          }\n        });\n      }\n\n      this.setState({\n        value: e.target.value,\n        id: e.target.options[e.target.selectedIndex].getAttribute(\"id\")\n      });\n    };\n\n    this.onChangeShortNumber = e => {\n      if (this.state.errors.short_number !== \"\") {\n        this.setState({\n          errors: {\n            short_number: \"\"\n          }\n        });\n      }\n\n      this.setState({\n        short_number: e.target.value\n      });\n    };\n\n    this.postDataHandler = e => {\n      const value = this.state.value;\n      const short_number = this.state.short_number;\n\n      if (value === \"select\") {\n        e.preventDefault();\n        this.setState({\n          errors: {\n            value: \"Please select a number\"\n          }\n        });\n        return;\n      }\n\n      if (short_number === \"\") {\n        e.preventDefault();\n        this.setState({\n          errors: {\n            short_number: \"Short number is required\"\n          }\n        });\n        return;\n      }\n\n      if (short_number === \"99\") {\n        e.preventDefault();\n        this.setState({\n          errors: {\n            short_number: \"99 is reserved for conference number\"\n          }\n        });\n        return;\n      }\n\n      if (!short_number.match(/^\\d{2}$/)) {\n        e.preventDefault();\n        this.setState({\n          errors: {\n            short_number: \"Must have two digits\"\n          }\n        });\n        return;\n      }\n\n      fetch(\"http://demo2.nsftele.com/travel-guide-php/addOrUpdateShortNumber.php\", {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\"\n        },\n        body: JSON.stringify({\n          id: this.state.id,\n          short_number: this.state.short_number\n        })\n      }).catch(error => this.setState({\n        error\n      }));\n    };\n  }\n\n  render() {\n    const modifedData = [...this.props.data];\n    const filtered = Object.values(modifedData.reduce((a, c) => {\n      a[c.number] = c;\n      return a;\n    }, {}));\n    const numbers = filtered.map(number => {\n      if (number.number !== \"35834439430\" && number.number !== \"35834439431\") {\n        return React.createElement(\"option\", {\n          key: number.id,\n          id: number.id,\n          value: number.number,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }, number.info);\n      } else return null;\n    });\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"ui one column stackable center aligned page grid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"column twelve wide\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    })), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"ui centered card\",\n      style: {\n        padding: \"30px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"ui form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        marginBottom: \"10px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Name\")), React.createElement(\"div\", {\n      style: {\n        marginBottom: \"10px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      onChange: this.onChangeValue,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"select\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Select a name\"), numbers), this.state.errors.value ? React.createElement(\"div\", {\n      className: \"ui basic red pointing prompt label transition visible\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, this.state.errors.value) : null), React.createElement(TextInputGroup, {\n      type: \"text\",\n      value: this.state.short_number,\n      placeholder: \"Enter a short number\",\n      onChange: this.onChangeShortNumber,\n      name: \"short_number\",\n      label: \"Short Number\",\n      error: this.state.errors.short_number,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.postDataHandler,\n      className: \"ui blue button\",\n      style: {\n        marginTop: \"10px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"Submit\"))));\n  }\n\n}\n\nexport default AddOrUpdateShortNumber;","map":{"version":3,"sources":["/home/cuong/react_projects/my-app-server/src/AddOrUpdateShortNumber.js"],"names":["React","TextInputGroup","AddOrUpdateShortNumber","Component","state","value","id","short_number","error","errors","onChangeValue","e","setState","target","options","selectedIndex","getAttribute","onChangeShortNumber","postDataHandler","preventDefault","match","fetch","method","headers","Accept","body","JSON","stringify","catch","render","modifedData","props","data","filtered","Object","values","reduce","a","c","number","numbers","map","info","padding","marginBottom","marginTop"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport TextInputGroup from \"./TextInputGroup\";\n\nclass AddOrUpdateShortNumber extends React.Component {\n  state = {\n    value: \"select\",\n    id: \"\",\n    short_number: \"\",\n    error: null,\n    errors: {\n      value: \"\",\n      short_number: \"\"\n    }\n  };\n\n  onChangeValue = e => {\n    if (this.state.errors.value !== \"\") {\n      this.setState({\n        errors: {\n          value: \"\"\n        }\n      });\n    }\n\n    this.setState({\n      value: e.target.value,\n      id: e.target.options[e.target.selectedIndex].getAttribute(\"id\")\n    });\n  };\n\n  onChangeShortNumber = e => {\n    if (this.state.errors.short_number !== \"\") {\n      this.setState({\n        errors: {\n          short_number: \"\"\n        }\n      });\n    }\n    this.setState({ short_number: e.target.value });\n  };\n\n  postDataHandler = e => {\n    const value = this.state.value;\n    const short_number = this.state.short_number;\n\n    if (value === \"select\") {\n      e.preventDefault();\n      this.setState({\n        errors: { value: \"Please select a number\" }\n      });\n      return;\n    }\n\n    if (short_number === \"\") {\n      e.preventDefault();\n      this.setState({\n        errors: { short_number: \"Short number is required\" }\n      });\n      return;\n    }\n\n    if (short_number === \"99\") {\n      e.preventDefault();\n      this.setState({\n        errors: { short_number: \"99 is reserved for conference number\" }\n      });\n      return;\n    }\n\n    if (!short_number.match(/^\\d{2}$/)) {\n      e.preventDefault();\n      this.setState({\n        errors: { short_number: \"Must have two digits\" }\n      });\n      return;\n    }\n\n    fetch(\n      \"http://demo2.nsftele.com/travel-guide-php/addOrUpdateShortNumber.php\",\n      {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\"\n        },\n        body: JSON.stringify({\n          id: this.state.id,\n          short_number: this.state.short_number\n        })\n      }\n    ).catch(error => this.setState({ error }));\n  };\n\n  render() {\n    const modifedData = [...this.props.data];\n    const filtered = Object.values(\n      modifedData.reduce((a, c) => {\n        a[c.number] = c;\n        return a;\n      }, {})\n    );\n    const numbers = filtered.map(number => {\n      if (number.number !== \"35834439430\" && number.number !== \"35834439431\") {\n        return (\n          <option key={number.id} id={number.id} value={number.number}>\n            {number.info}\n          </option>\n        );\n      } else return null;\n    });\n\n    return (\n      <div>\n        <div className=\"ui one column stackable center aligned page grid\">\n          <div className=\"column twelve wide\" />\n        </div>\n        <hr />\n        <div className=\"ui centered card\" style={{ padding: \"30px\" }}>\n          <form className=\"ui form\">\n            <div style={{ marginBottom: \"10px\" }}>\n              <strong>Name</strong>\n            </div>\n            <div style={{ marginBottom: \"10px\" }}>\n              <select onChange={this.onChangeValue}>\n                <option value=\"select\">Select a name</option>\n                {numbers}\n              </select>\n              {this.state.errors.value ? (\n                <div className=\"ui basic red pointing prompt label transition visible\">\n                  {this.state.errors.value}\n                </div>\n              ) : null}\n            </div>\n\n            <TextInputGroup\n              type=\"text\"\n              value={this.state.short_number}\n              placeholder=\"Enter a short number\"\n              onChange={this.onChangeShortNumber}\n              name=\"short_number\"\n              label=\"Short Number\"\n              error={this.state.errors.short_number}\n            />\n            <button\n              onClick={this.postDataHandler}\n              className=\"ui blue button\"\n              style={{ marginTop: \"10px\" }}\n            >\n              Submit\n            </button>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\nexport default AddOrUpdateShortNumber;\n"]},"metadata":{},"sourceType":"module"}