{"ast":null,"code":"var _jsxFileName = \"/home/cuong/react_projects/my-app-auth/src/AddOrUpdateShortNumber.js\";\nimport React from \"react\";\n\nclass AddOrUpdateShortNumber extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      value: \"select\",\n      id: \"\",\n      short_number: \"\",\n      error: null,\n      errors: {\n        value: \"\",\n        short_number: \"\"\n      }\n    };\n\n    this.onChangeValue = e => {\n      if (this.state.errors.value !== \"\") {\n        this.setState({\n          errors: {\n            value: \"\"\n          }\n        });\n      }\n\n      this.setState({\n        value: e.target.value,\n        id: e.target.options[e.target.selectedIndex].getAttribute(\"id\")\n      });\n    };\n\n    this.onChangeShortNumber = e => {\n      if (this.state.errors.short_number !== \"\") {\n        this.setState({\n          errors: {\n            short_number: \"\"\n          }\n        });\n      }\n\n      this.setState({\n        short_number: e.target.value\n      });\n    };\n\n    this.postDataHandler = e => {\n      const value = this.state.value;\n      const short_number = this.state.short_number;\n\n      if (value === \"select\") {\n        e.preventDefault();\n        this.setState({\n          errors: {\n            value: \"Please select a number\"\n          }\n        });\n        return;\n      }\n\n      if (short_number === \"\") {\n        e.preventDefault();\n        this.setState({\n          errors: {\n            short_number: \"Short number is required\"\n          }\n        });\n        return;\n      }\n\n      if (short_number === \"99\") {\n        e.preventDefault();\n        this.setState({\n          errors: {\n            short_number: \"99 is reserved for conference number\"\n          }\n        });\n        return;\n      }\n\n      if (!short_number.match(/^\\d{2}$/)) {\n        e.preventDefault();\n        this.setState({\n          errors: {\n            short_number: \"Must have two digits\"\n          }\n        });\n        return;\n      }\n\n      fetch(\"http://demo2.nsftele.com/travel-guide-php/addOrUpdateShortNumber.php\", {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\"\n        },\n        body: JSON.stringify({\n          id: this.state.id,\n          short_number: this.state.short_number\n        })\n      }).catch(error => this.setState({\n        error\n      }));\n    };\n  }\n\n  render() {\n    const modifedData = [...this.props.data];\n    const filtered = Object.values(modifedData.reduce((a, c) => {\n      a[c.number] = c;\n      return a;\n    }, {}));\n    const numbers = filtered.map(number => {\n      if (number.number !== \"35834439430\" && number.number !== \"35834439431\") {\n        return React.createElement(\"option\", {\n          key: number.id,\n          id: number.id,\n          value: number.number,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, number.info);\n      } else return null;\n    });\n    return React.createElement(\"div\", {\n      className: \"card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        marginBottom: \"10px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Name\")), React.createElement(\"div\", {\n      style: {\n        marginBottom: \"10px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      onChange: this.onChangeValue,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"select\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Select a name\"), numbers), this.state.errors.value ? React.createElement(\"small\", {\n      className: \"form-text text-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, this.state.errors.value) : null)), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"public_number\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"Short Number\"), React.createElement(\"input\", {\n      onChange: this.onChangeShortNumber,\n      type: \"text\",\n      value: this.state.short_number,\n      className: \"form-control\",\n      placeholder: \"Enter a short Number\",\n      name: \"short_number\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }), this.state.errors.short_number ? React.createElement(\"small\", {\n      className: \"form-text text-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, this.state.errors.short_number) : null), React.createElement(\"button\", {\n      onClick: this.postDataHandler,\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"Submit\"))));\n  }\n\n}\n\nexport default AddOrUpdateShortNumber;","map":{"version":3,"sources":["/home/cuong/react_projects/my-app-auth/src/AddOrUpdateShortNumber.js"],"names":["React","AddOrUpdateShortNumber","Component","state","value","id","short_number","error","errors","onChangeValue","e","setState","target","options","selectedIndex","getAttribute","onChangeShortNumber","postDataHandler","preventDefault","match","fetch","method","headers","Accept","body","JSON","stringify","catch","render","modifedData","props","data","filtered","Object","values","reduce","a","c","number","numbers","map","info","marginBottom"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,sBAAN,SAAqCD,KAAK,CAACE,SAA3C,CAAqD;AAAA;AAAA;AAAA,SACnDC,KADmD,GAC3C;AACNC,MAAAA,KAAK,EAAE,QADD;AAENC,MAAAA,EAAE,EAAE,EAFE;AAGNC,MAAAA,YAAY,EAAE,EAHR;AAINC,MAAAA,KAAK,EAAE,IAJD;AAKNC,MAAAA,MAAM,EAAE;AACNJ,QAAAA,KAAK,EAAE,EADD;AAENE,QAAAA,YAAY,EAAE;AAFR;AALF,KAD2C;;AAAA,SAYnDG,aAZmD,GAYnCC,CAAC,IAAI;AACnB,UAAI,KAAKP,KAAL,CAAWK,MAAX,CAAkBJ,KAAlB,KAA4B,EAAhC,EAAoC;AAClC,aAAKO,QAAL,CAAc;AACZH,UAAAA,MAAM,EAAE;AACNJ,YAAAA,KAAK,EAAE;AADD;AADI,SAAd;AAKD;;AAED,WAAKO,QAAL,CAAc;AACZP,QAAAA,KAAK,EAAEM,CAAC,CAACE,MAAF,CAASR,KADJ;AAEZC,QAAAA,EAAE,EAAEK,CAAC,CAACE,MAAF,CAASC,OAAT,CAAiBH,CAAC,CAACE,MAAF,CAASE,aAA1B,EAAyCC,YAAzC,CAAsD,IAAtD;AAFQ,OAAd;AAID,KAzBkD;;AAAA,SA2BnDC,mBA3BmD,GA2B7BN,CAAC,IAAI;AACzB,UAAI,KAAKP,KAAL,CAAWK,MAAX,CAAkBF,YAAlB,KAAmC,EAAvC,EAA2C;AACzC,aAAKK,QAAL,CAAc;AACZH,UAAAA,MAAM,EAAE;AACNF,YAAAA,YAAY,EAAE;AADR;AADI,SAAd;AAKD;;AACD,WAAKK,QAAL,CAAc;AAAEL,QAAAA,YAAY,EAAEI,CAAC,CAACE,MAAF,CAASR;AAAzB,OAAd;AACD,KApCkD;;AAAA,SAsCnDa,eAtCmD,GAsCjCP,CAAC,IAAI;AACrB,YAAMN,KAAK,GAAG,KAAKD,KAAL,CAAWC,KAAzB;AACA,YAAME,YAAY,GAAG,KAAKH,KAAL,CAAWG,YAAhC;;AAEA,UAAIF,KAAK,KAAK,QAAd,EAAwB;AACtBM,QAAAA,CAAC,CAACQ,cAAF;AACA,aAAKP,QAAL,CAAc;AACZH,UAAAA,MAAM,EAAE;AAAEJ,YAAAA,KAAK,EAAE;AAAT;AADI,SAAd;AAGA;AACD;;AAED,UAAIE,YAAY,KAAK,EAArB,EAAyB;AACvBI,QAAAA,CAAC,CAACQ,cAAF;AACA,aAAKP,QAAL,CAAc;AACZH,UAAAA,MAAM,EAAE;AAAEF,YAAAA,YAAY,EAAE;AAAhB;AADI,SAAd;AAGA;AACD;;AAED,UAAIA,YAAY,KAAK,IAArB,EAA2B;AACzBI,QAAAA,CAAC,CAACQ,cAAF;AACA,aAAKP,QAAL,CAAc;AACZH,UAAAA,MAAM,EAAE;AAAEF,YAAAA,YAAY,EAAE;AAAhB;AADI,SAAd;AAGA;AACD;;AAED,UAAI,CAACA,YAAY,CAACa,KAAb,CAAmB,SAAnB,CAAL,EAAoC;AAClCT,QAAAA,CAAC,CAACQ,cAAF;AACA,aAAKP,QAAL,CAAc;AACZH,UAAAA,MAAM,EAAE;AAAEF,YAAAA,YAAY,EAAE;AAAhB;AADI,SAAd;AAGA;AACD;;AAEDc,MAAAA,KAAK,CACH,sEADG,EAEH;AACEC,QAAAA,MAAM,EAAE,MADV;AAEEC,QAAAA,OAAO,EAAE;AACPC,UAAAA,MAAM,EAAE;AADD,SAFX;AAKEC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBrB,UAAAA,EAAE,EAAE,KAAKF,KAAL,CAAWE,EADI;AAEnBC,UAAAA,YAAY,EAAE,KAAKH,KAAL,CAAWG;AAFN,SAAf;AALR,OAFG,CAAL,CAYEqB,KAZF,CAYQpB,KAAK,IAAI,KAAKI,QAAL,CAAc;AAAEJ,QAAAA;AAAF,OAAd,CAZjB;AAaD,KAvFkD;AAAA;;AAyFnDqB,EAAAA,MAAM,GAAG;AACP,UAAMC,WAAW,GAAG,CAAC,GAAG,KAAKC,KAAL,CAAWC,IAAf,CAApB;AACA,UAAMC,QAAQ,GAAGC,MAAM,CAACC,MAAP,CACfL,WAAW,CAACM,MAAZ,CAAmB,CAACC,CAAD,EAAIC,CAAJ,KAAU;AAC3BD,MAAAA,CAAC,CAACC,CAAC,CAACC,MAAH,CAAD,GAAcD,CAAd;AACA,aAAOD,CAAP;AACD,KAHD,EAGG,EAHH,CADe,CAAjB;AAMA,UAAMG,OAAO,GAAGP,QAAQ,CAACQ,GAAT,CAAaF,MAAM,IAAI;AACrC,UAAIA,MAAM,CAACA,MAAP,KAAkB,aAAlB,IAAmCA,MAAM,CAACA,MAAP,KAAkB,aAAzD,EAAwE;AACtE,eACE;AAAQ,UAAA,GAAG,EAAEA,MAAM,CAACjC,EAApB;AAAwB,UAAA,EAAE,EAAEiC,MAAM,CAACjC,EAAnC;AAAuC,UAAA,KAAK,EAAEiC,MAAM,CAACA,MAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGA,MAAM,CAACG,IADV,CADF;AAKD,OAND,MAMO,OAAO,IAAP;AACR,KARe,CAAhB;AAUA,WACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,KAAK,EAAE;AAAEC,QAAAA,YAAY,EAAE;AAAhB,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CADF,EAIE;AAAK,MAAA,KAAK,EAAE;AAAEA,QAAAA,YAAY,EAAE;AAAhB,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAQ,MAAA,QAAQ,EAAE,KAAKjC,aAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAQ,MAAA,KAAK,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,EAEG8B,OAFH,CADF,EAKG,KAAKpC,KAAL,CAAWK,MAAX,CAAkBJ,KAAlB,GACC;AAAO,MAAA,SAAS,EAAC,uBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKD,KAAL,CAAWK,MAAX,CAAkBJ,KADrB,CADD,GAIG,IATN,CAJF,CADF,EAiBE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAO,MAAA,OAAO,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EAEE;AACE,MAAA,QAAQ,EAAE,KAAKY,mBADjB;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,KAAK,EAAE,KAAKb,KAAL,CAAWG,YAHpB;AAIE,MAAA,SAAS,EAAC,cAJZ;AAKE,MAAA,WAAW,EAAC,sBALd;AAME,MAAA,IAAI,EAAC,cANP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAUG,KAAKH,KAAL,CAAWK,MAAX,CAAkBF,YAAlB,GACC;AAAO,MAAA,SAAS,EAAC,uBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKH,KAAL,CAAWK,MAAX,CAAkBF,YADrB,CADD,GAIG,IAdN,CAjBF,EAiCE;AACE,MAAA,OAAO,EAAE,KAAKW,eADhB;AAEE,MAAA,IAAI,EAAC,QAFP;AAGE,MAAA,SAAS,EAAC,iBAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAjCF,CADF,CADF,CADF;AA+CD;;AA1JkD;;AA4JrD,eAAehB,sBAAf","sourcesContent":["import React from \"react\";\n\nclass AddOrUpdateShortNumber extends React.Component {\n  state = {\n    value: \"select\",\n    id: \"\",\n    short_number: \"\",\n    error: null,\n    errors: {\n      value: \"\",\n      short_number: \"\"\n    }\n  };\n\n  onChangeValue = e => {\n    if (this.state.errors.value !== \"\") {\n      this.setState({\n        errors: {\n          value: \"\"\n        }\n      });\n    }\n\n    this.setState({\n      value: e.target.value,\n      id: e.target.options[e.target.selectedIndex].getAttribute(\"id\")\n    });\n  };\n\n  onChangeShortNumber = e => {\n    if (this.state.errors.short_number !== \"\") {\n      this.setState({\n        errors: {\n          short_number: \"\"\n        }\n      });\n    }\n    this.setState({ short_number: e.target.value });\n  };\n\n  postDataHandler = e => {\n    const value = this.state.value;\n    const short_number = this.state.short_number;\n\n    if (value === \"select\") {\n      e.preventDefault();\n      this.setState({\n        errors: { value: \"Please select a number\" }\n      });\n      return;\n    }\n\n    if (short_number === \"\") {\n      e.preventDefault();\n      this.setState({\n        errors: { short_number: \"Short number is required\" }\n      });\n      return;\n    }\n\n    if (short_number === \"99\") {\n      e.preventDefault();\n      this.setState({\n        errors: { short_number: \"99 is reserved for conference number\" }\n      });\n      return;\n    }\n\n    if (!short_number.match(/^\\d{2}$/)) {\n      e.preventDefault();\n      this.setState({\n        errors: { short_number: \"Must have two digits\" }\n      });\n      return;\n    }\n\n    fetch(\n      \"http://demo2.nsftele.com/travel-guide-php/addOrUpdateShortNumber.php\",\n      {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\"\n        },\n        body: JSON.stringify({\n          id: this.state.id,\n          short_number: this.state.short_number\n        })\n      }\n    ).catch(error => this.setState({ error }));\n  };\n\n  render() {\n    const modifedData = [...this.props.data];\n    const filtered = Object.values(\n      modifedData.reduce((a, c) => {\n        a[c.number] = c;\n        return a;\n      }, {})\n    );\n    const numbers = filtered.map(number => {\n      if (number.number !== \"35834439430\" && number.number !== \"35834439431\") {\n        return (\n          <option key={number.id} id={number.id} value={number.number}>\n            {number.info}\n          </option>\n        );\n      } else return null;\n    });\n\n    return (\n      <div className=\"card\">\n        <div className=\"card-body\">\n          <form>\n            <div className=\"form-group\">\n              <div style={{ marginBottom: \"10px\" }}>\n                <strong>Name</strong>\n              </div>\n              <div style={{ marginBottom: \"10px\" }}>\n                <select onChange={this.onChangeValue}>\n                  <option value=\"select\">Select a name</option>\n                  {numbers}\n                </select>\n                {this.state.errors.value ? (\n                  <small className=\"form-text text-danger\">\n                    {this.state.errors.value}\n                  </small>\n                ) : null}\n              </div>\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"public_number\">Short Number</label>\n              <input\n                onChange={this.onChangeShortNumber}\n                type=\"text\"\n                value={this.state.short_number}\n                className=\"form-control\"\n                placeholder=\"Enter a short Number\"\n                name=\"short_number\"\n              />\n              {this.state.errors.short_number ? (\n                <small className=\"form-text text-danger\">\n                  {this.state.errors.short_number}\n                </small>\n              ) : null}\n            </div>\n            <button\n              onClick={this.postDataHandler}\n              type=\"submit\"\n              className=\"btn btn-primary\"\n            >\n              Submit\n            </button>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\nexport default AddOrUpdateShortNumber;\n"]},"metadata":{},"sourceType":"module"}