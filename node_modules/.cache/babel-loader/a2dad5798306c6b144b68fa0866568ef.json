{"ast":null,"code":"import _objectWithoutProperties from \"/home/cuong/react_projects/my-app-auth/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/home/cuong/react_projects/my-app-auth/src/Components/HomePage.js\";\nimport React from 'react';\nimport PhoneList from './PhoneList';\nimport AddNumberModal from '../UI/Modals/AddNumberModal';\nimport TableForPrint from './TableForPrint';\nimport XLSX from 'xlsx';\nimport NavBar from '../UI/NavBar';\n\nclass HomePage extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: [],\n      error: null,\n      fileName: 'contact.xlsx',\n      alarmMessage: ''\n    };\n\n    this.customers = () => {\n      let customers = this.state.data.map((_ref) => {\n        let alert_info_enabled = _ref.alert_info_enabled,\n            aservicemask_id = _ref.aservicemask_id,\n            forward_autoself = _ref.forward_autoself,\n            number = _ref.number,\n            language_id = _ref.language_id,\n            notify = _ref.notify,\n            operator_id = _ref.operator_id,\n            number_id = _ref.number_id,\n            id = _ref.id,\n            type = _ref.type,\n            use_default = _ref.use_default,\n            voiplocation_code = _ref.voiplocation_code,\n            company_id = _ref.company_id,\n            whitelist = _ref.whitelist,\n            whitelist_mode = _ref.whitelist_mode,\n            whitelist_pin_in = _ref.whitelist_pin_in,\n            whitelist_pin_in_enabled = _ref.whitelist_pin_in_enabled,\n            whitelist_pin_out = _ref.whitelist_pin_out,\n            whitelist_pin_out_enabled = _ref.whitelist_pin_out_enabled,\n            item = _objectWithoutProperties(_ref, [\"alert_info_enabled\", \"aservicemask_id\", \"forward_autoself\", \"number\", \"language_id\", \"notify\", \"operator_id\", \"number_id\", \"id\", \"type\", \"use_default\", \"voiplocation_code\", \"company_id\", \"whitelist\", \"whitelist_mode\", \"whitelist_pin_in\", \"whitelist_pin_in_enabled\", \"whitelist_pin_out\", \"whitelist_pin_out_enabled\"]);\n\n        return item;\n      });\n      customers = customers.map(({\n        info,\n        short_number\n      }) => ({\n        Name: info,\n        Number: short_number\n      }));\n      customers = customers.filter(person => person.Name !== 'Opas test IVR number');\n      customers = customers.filter(person => person.Name !== 'Call Conference');\n      customers.push({\n        Name: 'Call Conference',\n        Number: '99'\n      });\n      customers.push({\n        Name: 'Palvelu Numero',\n        Number: '034439430'\n      });\n      return customers;\n    };\n\n    this.printData = () => {\n      const divToPrint = document.getElementById('printTable');\n      const newWin = window.open('');\n      newWin.document.write(divToPrint.outerHTML);\n      newWin.print();\n      newWin.close();\n    };\n\n    this.exportFile = () => {\n      /* convert state.data to worksheet */\n      const ws = XLSX.utils.json_to_sheet(this.customers());\n      /* build a workbook */\n\n      const wb = XLSX.utils.book_new();\n      XLSX.utils.book_append_sheet(wb, ws, 'SheetJS');\n      /* generate XLSX file and send to client */\n\n      XLSX.writeFile(wb, 'contact.xlsx');\n    };\n\n    this.deleteShortNumberHandler = id => {\n      fetch('http://demo2.nsftele.com/travel-guide-php/removeShortNumber.php', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json'\n        },\n        body: JSON.stringify({\n          short_number: id\n        })\n      }).then(() => {\n        this.loadData();\n      }).catch(error => this.setState({\n        error\n      }));\n    };\n\n    this.deletePublicNumberHandler = id => {\n      fetch('http://demo2.nsftele.com/travel-guide-php/removePublicNumber.php', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json'\n        },\n        body: JSON.stringify({\n          number_id: id\n        })\n      }).then(() => {\n        this.loadData();\n      }).catch(error => this.setState({\n        error\n      }));\n    };\n\n    this.makeCall = () => {\n      this.refs.child.alarmCallAPI();\n    };\n\n    this.showLog = () => {\n      this.refs.child.showLog();\n    };\n\n    this.onChangeMessage = e => {\n      this.setState({\n        alarmMessage: e.target.value\n      });\n    };\n  }\n\n  loadData() {\n    fetch('http://demo2.nsftele.com/travel-guide-php/data.php').then(response => {\n      return response.json();\n    }).then(result => {\n      this.setState({\n        data: result\n      });\n    }).catch(error => this.setState({\n      error\n    }));\n  }\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      style: {\n        paddingBottom: '100px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(NavBar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }), this.state.error ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"Network error: \", this.state.error.message)) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        paddingLeft: '20px',\n        paddingTop: '20px'\n      },\n      className: \"d-inline-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-info\",\n      onClick: this.exportFile,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-file-export\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }), \" Export To Excel\"), \"\\xA0 \\xA0\", React.createElement(\"button\", {\n      className: \"btn btn-success\",\n      onClick: this.printData,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-print\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }), \" Print Table\"), React.createElement(\"div\", {\n      className: \"d-inline-block\",\n      style: {\n        paddingLeft: '20px',\n        paddingTop: '20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(AddNumberModal, {\n      data: this.state.data,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"d-inline-block btn-group\",\n      style: {\n        paddingLeft: '10px',\n        paddingTop: '20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      \"data-toggle\": \"dropdown\",\n      className: \"btn btn-info ml-3 mb-4 dropdown-toggle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-phone\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }), \" Alarm Call\"), React.createElement(\"div\", {\n      className: \"border-0 dropdown-menu\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.makeCall,\n      className: \"btn btn-success mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \"Make Phone Call\"), React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.showLog,\n      className: \"btn btn-success\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, \"Call Log\"))), React.createElement(\"div\", {\n      className: \"d-inline-block\",\n      style: {\n        paddingLeft: '20px',\n        paddingTop: '20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      onChange: this.onChangeMessage,\n      type: \"text\",\n      value: this.state.alarmMessage,\n      className: \"form-control\",\n      placeholder: \"Enter call alarm message\",\n      name: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      style: {\n        fontSize: 'large',\n        paddingLeft: '20px',\n        paddingTop: '10px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }), \"Palvelu Numero: 034439430\"), React.createElement(\"div\", {\n      style: {\n        paddingTop: '30px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(PhoneList, {\n      ref: \"child\",\n      onSubmitPN: this.deletePublicNumberHandler,\n      onSubmitSN: this.deleteShortNumberHandler,\n      data: this.state.data,\n      message: this.state.alarmMessage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, React.createElement(TableForPrint, {\n      data: this.state.data,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default HomePage;","map":{"version":3,"sources":["/home/cuong/react_projects/my-app-auth/src/Components/HomePage.js"],"names":["React","PhoneList","AddNumberModal","TableForPrint","XLSX","NavBar","HomePage","Component","state","data","error","fileName","alarmMessage","customers","map","alert_info_enabled","aservicemask_id","forward_autoself","number","language_id","notify","operator_id","number_id","id","type","use_default","voiplocation_code","company_id","whitelist","whitelist_mode","whitelist_pin_in","whitelist_pin_in_enabled","whitelist_pin_out","whitelist_pin_out_enabled","item","info","short_number","Name","Number","filter","person","push","printData","divToPrint","document","getElementById","newWin","window","open","write","outerHTML","print","close","exportFile","ws","utils","json_to_sheet","wb","book_new","book_append_sheet","writeFile","deleteShortNumberHandler","fetch","method","headers","Accept","body","JSON","stringify","then","loadData","catch","setState","deletePublicNumberHandler","makeCall","refs","child","alarmCallAPI","showLog","onChangeMessage","e","target","value","response","json","result","componentDidMount","render","paddingBottom","message","paddingLeft","paddingTop","fontSize"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PhoneList from './PhoneList';\nimport AddNumberModal from '../UI/Modals/AddNumberModal';\nimport TableForPrint from './TableForPrint';\nimport XLSX from 'xlsx';\nimport NavBar from '../UI/NavBar';\n\nclass HomePage extends React.Component {\n  state = {\n    data: [],\n    error: null,\n    fileName: 'contact.xlsx',\n    alarmMessage: ''\n  };\n\n  customers = () => {\n    let customers = this.state.data.map(\n      ({\n        alert_info_enabled,\n        aservicemask_id,\n        forward_autoself,\n        number,\n        language_id,\n        notify,\n        operator_id,\n        number_id,\n        id,\n        type,\n        use_default,\n        voiplocation_code,\n        company_id,\n        whitelist,\n        whitelist_mode,\n        whitelist_pin_in,\n        whitelist_pin_in_enabled,\n        whitelist_pin_out,\n        whitelist_pin_out_enabled,\n        ...item\n      }) => item\n    );\n    customers = customers.map(({ info, short_number }) => ({\n      Name: info,\n      Number: short_number\n    }));\n    customers = customers.filter(\n      person => person.Name !== 'Opas test IVR number'\n    );\n    customers = customers.filter(person => person.Name !== 'Call Conference');\n    customers.push({ Name: 'Call Conference', Number: '99' });\n    customers.push({ Name: 'Palvelu Numero', Number: '034439430' });\n    return customers;\n  };\n\n  printData = () => {\n    const divToPrint = document.getElementById('printTable');\n    const newWin = window.open('');\n    newWin.document.write(divToPrint.outerHTML);\n    newWin.print();\n    newWin.close();\n  };\n\n  exportFile = () => {\n    /* convert state.data to worksheet */\n    const ws = XLSX.utils.json_to_sheet(this.customers());\n    /* build a workbook */\n    const wb = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(wb, ws, 'SheetJS');\n    /* generate XLSX file and send to client */\n    XLSX.writeFile(wb, 'contact.xlsx');\n  };\n\n  loadData() {\n    fetch('http://demo2.nsftele.com/travel-guide-php/data.php')\n      .then(response => {\n        return response.json();\n      })\n      .then(result => {\n        this.setState({\n          data: result\n        });\n      })\n      .catch(error => this.setState({ error }));\n  }\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  deleteShortNumberHandler = id => {\n    fetch('http://demo2.nsftele.com/travel-guide-php/removeShortNumber.php', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json'\n      },\n      body: JSON.stringify({\n        short_number: id\n      })\n    })\n      .then(() => {\n        this.loadData();\n      })\n      .catch(error => this.setState({ error }));\n  };\n\n  deletePublicNumberHandler = id => {\n    fetch('http://demo2.nsftele.com/travel-guide-php/removePublicNumber.php', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json'\n      },\n      body: JSON.stringify({\n        number_id: id\n      })\n    })\n      .then(() => {\n        this.loadData();\n      })\n      .catch(error => this.setState({ error }));\n  };\n\n  makeCall = () => {\n    this.refs.child.alarmCallAPI();\n  };\n\n  showLog = () => {\n    this.refs.child.showLog();\n  };\n\n  onChangeMessage = e => {\n    this.setState({ alarmMessage: e.target.value });\n  };\n\n  render() {\n    return (\n      <div style={{ paddingBottom: '100px' }}>\n        <NavBar />\n        {this.state.error ? (\n          <div>\n            <p>Network error: {this.state.error.message}</p>\n          </div>\n        ) : (\n          <div>\n            <div\n              style={{ paddingLeft: '20px', paddingTop: '20px' }}\n              className=\"d-inline-block\"\n            >\n              <button className=\"btn btn-info\" onClick={this.exportFile}>\n                <i className=\"fa fa-file-export\"></i> Export To Excel\n              </button>\n              &nbsp; &nbsp;\n              <button className=\"btn btn-success\" onClick={this.printData}>\n                <i className=\"fa fa-print\"></i> Print Table\n              </button>\n              <div\n                className=\"d-inline-block\"\n                style={{ paddingLeft: '20px', paddingTop: '20px' }}\n              >\n                <AddNumberModal data={this.state.data} />\n              </div>\n              <div\n                className=\"d-inline-block btn-group\"\n                style={{ paddingLeft: '10px', paddingTop: '20px' }}\n              >\n                <button\n                  type=\"button\"\n                  data-toggle=\"dropdown\"\n                  className=\"btn btn-info ml-3 mb-4 dropdown-toggle\"\n                >\n                  <i className=\"fa fa-phone\"></i> Alarm Call\n                </button>\n                <div className=\"border-0 dropdown-menu\">\n                  <button\n                    type=\"button\"\n                    onClick={this.makeCall}\n                    className=\"btn btn-success mb-2\"\n                  >\n                    Make Phone Call\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={this.showLog}\n                    className=\"btn btn-success\"\n                  >\n                    Call Log\n                  </button>\n                </div>\n              </div>\n              <div\n                className=\"d-inline-block\"\n                style={{ paddingLeft: '20px', paddingTop: '20px' }}\n              >\n                <input\n                  onChange={this.onChangeMessage}\n                  type=\"text\"\n                  value={this.state.alarmMessage}\n                  className=\"form-control\"\n                  placeholder=\"Enter call alarm message\"\n                  name=\"name\"\n                />\n              </div>\n            </div>\n            <div\n              style={{\n                fontSize: 'large',\n                paddingLeft: '20px',\n                paddingTop: '10px'\n              }}\n            >\n              <br />\n              Palvelu Numero: 034439430\n            </div>\n            <div style={{ paddingTop: '30px' }}>\n              <PhoneList\n                ref=\"child\"\n                onSubmitPN={this.deletePublicNumberHandler}\n                onSubmitSN={this.deleteShortNumberHandler}\n                data={this.state.data}\n                message={this.state.alarmMessage}\n              />\n            </div>\n            <div>\n              <TableForPrint data={this.state.data} />\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\nexport default HomePage;\n"]},"metadata":{},"sourceType":"module"}